# RustQuote Service

This is a placeholder README for the RustQuote Service.

## CI Pipeline

A Continuous Integration (CI) pipeline is set up using GitHub Actions. The workflow is defined in [`.github/workflows/rust.yml`](.github/workflows/rust.yml:0).

The CI pipeline includes the following steps:
- Checkout code
- Cache Cargo dependencies
- Run `cargo check`
- Run `cargo build --verbose`
- Run `cargo test --verbose`
- Run `cargo clippy -- -D warnings`

The pipeline triggers on:
- Pushes to `main` and `develop` branches
- Pull requests targeting `main` and `develop` branches

You can check the CI status for your commits and pull requests in the "Actions" tab of the GitHub repository.

## API Endpoint Testing

API endpoint testing is conducted as part of the integration test suite located in [`tests/integration_tests.rs`](tests/integration_tests.rs:0). These tests ensure the reliability and correctness of the API endpoints.

The tests cover the following aspects:
- **Successful responses:** Verifying correct status codes (e.g., `200 OK`) and payload structure for valid requests to endpoints like `GET /api/v1/quote` and `GET /api/health`.
- **Error handling:** Ensuring appropriate error responses (e.g., `404 Not Found`, `500 Internal Server Error`) and informative error messages for various failure scenarios, such as:
    - Non-existent data files.
    - Empty data files.
    - Malformed or invalid JSON data in files.
    - Individual data entries with missing or corrupt fields.
- **HTTP methods:** Currently, `GET` requests are tested as per the API design.
- **Response payloads:** Validation of JSON response structures and data types against expected formats.
- **Edge cases:** Testing for conditions like empty data sources or corrupted data.

These tests are automatically executed by the CI pipeline via the `cargo test` command, as defined in the [`.github/workflows/rust.yml`](.github/workflows/rust.yml:0) workflow.
## Code Coverage

Code coverage for this project is tracked using [`cargo-tarpaulin`](https://crates.io/crates/cargo-tarpaulin). It helps in understanding how much of the codebase is covered by the automated tests.

### Generating Reports Locally

To generate a code coverage report locally, you first need to install `cargo-tarpaulin`:

```bash
cargo install cargo-tarpaulin --version 0.27.1
```

Then, run the following command from the root of the project:

```bash
cargo tarpaulin --out Xml --output-dir ./coverage --all-features --engine llvm --timeout 120 -- --test-threads=1
```

This will generate an XML report (Cobertura format) in the `coverage` directory. You can then use a compatible viewer or IDE extension to inspect the `cobertura.xml` file. Other output formats like HTML can also be generated by changing the `--out` parameter (e.g., `--out Html`).

### CI Pipeline Integration

The CI pipeline, defined in [`.github/workflows/rust.yml`](.github/workflows/rust.yml:1), automatically generates a code coverage report after the tests are run.
The generated report (`cobertura.xml`) is then uploaded as an artifact named `coverage-report`. You can download and view this report from the "Summary" page of the specific workflow run in the "Actions" tab of the GitHub repository.